<div align="center">

  <a>
    <picture>
      <source media="(prefers-color-scheme: dark)" srcset="https://user-images.githubusercontent.com/37530409/205920274-d4cd2c4e-92d9-40d8-ac0f-39e8374600d6.svg" height="200">
      <img alt="Dowel banner" src="https://user-images.githubusercontent.com/37530409/205920279-1c22ea9e-1f81-45d9-9994-01785e9ab473.svg" height="200">
    </picture>
  </a>

  <h1>A <code>CLI</code> tool to convert <code>multi-module</code> <code>Jetpack Compose</code> compiler <code>metrics</code> into beautiful <code>HTML</code> reports</h1>

</div>

<details>
  <summary><h3>1. What are Jetpack Compose compiler metrics?<h3/></summary>

The [`Compose`](https://developer.android.com/jetpack/compose) `Compiler plugin` can generate `reports/metrics` around certain Compose-specific concepts that can be useful in understanding what is happening with some of the `Compose` code at a fine-grained level.
    
It can output various performance-related `metrics` at build time, allowing us to peek behind the curtains and see where any potential `performance issues` are.
    
Read more [here](https://github.com/androidx/androidx/blob/androidx-main/compose/compiler/design/compiler-metrics.md)

</details>
  
## 2. Why `Mendable`?

Altho, the `metrics` generated by the `Compose Compiler` are in pseudo-Kotlin style function signatures, which are reasonably readable. But, over time these files get big and unwieldy to work with, and checking each-and-every `composable` in those `txt files` becomes cumbersome and clumsy. Also, these reports are spread across different `files` for different `modules`.

That is where `Mendable` comes in and takes care of generating `HTML reports` for `Compose` `compiler metrics`, which are much easier to work with. And `Mendable` only presents `composable` methods which require your attention, and highlights the issue-causing part with appropriate colors. It filters out the rest of the `composables` which are non-problematic.

`Mendable` also takes reports of `multiple modules` and merges them into different `sections` of a single beautiful `HTML page` to reduce going back and forth while working.

> **Note** : `Mendable` only generates `HTML report` for the `composables` `metrics`. In other words, it only targets the `<module>-composables.txt` `files`.

## 3. `Gradle` setup - for generating `Compose` `compiler metrics`

Add the following lines to your **root project's** `build.gradle` file. This will direct the `Compose` `compiler` to generate `metrics` and save all of them into the **root project's** `build folder` (for all of the `modules`).


<details open>
  <summary><code>Groovy</code></summary>
  
``` groovy
subprojects {
    tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
        kotlinOptions {
            // Trigger this with:
            // ./gradlew assembleRelease -PenableMultiModuleComposeReports=true --rerun-tasks
            if (project.findProperty("enableMultiModuleComposeReports") == "true") {
                freeCompilerArgs += ["-P", "plugin:androidx.compose.compiler.plugins.kotlin:reportsDestination=" + rootProject.buildDir.absolutePath + "/compose_metrics/"]
                freeCompilerArgs += ["-P", "plugin:androidx.compose.compiler.plugins.kotlin:metricsDestination=" + rootProject.buildDir.absolutePath + "/compose_metrics/"]
            }
        }
    }
}
```
</details>

<details>
  <summary><code>Kotlin scipt</code></summary>
  
```kotlin
allprojects {
    tasks.withType(org.jetbrains.kotlin.gradle.dsl.KotlinCompile::class.java).configureEach {
        kotlinOptions {
            // Trigger this with:
            // ./gradlew assembleRelease -PenableMultiModuleComposeReports=true --rerun-tasks
            if (project.findProperty("enableMultiModuleComposeReports") == "true") {
                freeCompilerArgs += listOf("-P", "plugin:androidx.compose.compiler.plugins.kotlin:reportsDestination=" + rootProject.buildDir.absolutePath + "/compose_metrics/")
                freeCompilerArgs += listOf("-P", "plugin:androidx.compose.compiler.plugins.kotlin:metricsDestination=" + rootProject.buildDir.absolutePath + "/compose_metrics/")
            }
        }
    }
}
```
</details>

With the above setup, you can generate `Compose` `compiler metrics` by executing the following `command` in the `terminal` window.

```
./gradlew assembleRelease -PenableMultiModuleComposeReports=true --rerun-tasks
```
